---
layout: master
---

<div class="media-grid">
    {% for post in site.posts %}
        {% if page.force_grid_size %}
            {% assign grid_size = page.force_grid_size %}
        {% else %}
            {% if post.column_width %}
                {% assign grid_size = post.column_width %}
            {% else %}
                {% assign grid_size = 2 %}
            {% endif %}
        {% endif %}

        {% assign masonry-column-class = "column-width-" | append: grid_size %}
        {% if grid_size < 3 %}
            {% assign thumb_size = "small" %}
        {% else %}
            {% assign thumb_size = "large" %}
        {% endif %}
    
        <a
            class="grid-item {{ masonry-column-class }}"
            title="{{ post.title }}"
            href="{{ post.url }}"
        >
            <picture>
                <source srcset="/assets/img/thumbnails_{{ thumb_size }}/{{ post.images[0] }}.webp" type="image/webp">
                <source srcset="/assets/img/thumbnails_{{ thumb_size }}/{{ post.images[0] }}.jpg" type="image/jpeg">
                <img
                    src="/assets/img/thumbnails_{{ thumb_size }}/{{ post.images[0] }}.jpg"
                    alt="{{ post.title }}, {{ post.media }}, {{ post.year }}"
                />
            </picture>
        </a>
    {% endfor %}
    <span class="grid-item column-width-1"></span>
</div>
